jQuery(function($){function e(){var e=[];return $("#genre-filter li input:checked").each(function(){var n=$(this).val();e.push(n)}),e}function n(){var e=$("#genre-search input.text-search").val();return e}function r(r){var t=r,a=ajax_genre_params.ajax_url;$.ajax({type:"GET",url:a,data:{action:"product_filter",genres:e,search:n(),paged:t},beforeSend:function(){},success:function(e){$("#genre-results").html(e)},error:function(){$("#genre-results").html("<p>There has been an error</p>")}})}r(),$("#genre-filter").on("click","li",function(){var e=$(this).find("input");"clear-all"==$(this).attr("class")?($("#genre-filter li").removeClass("selected").find("input").prop("checked",!1),r()):e.is(":checked")?(e.prop("checked",!1),$(this).removeClass("selected")):(e.prop("checked",!0),$(this).addClass("selected")),e.trigger("change")}),$("#genre-filter").on("change","input",function(){r()}),$("#genre-search").on("keyup","input.text-search",function(e){27==e.keyCode&&$(this).val(""),r()}),$("body").on("click","#submit-search",function(e){e.preventDefault(),r()}),$(".genre-filter-navigation").on("click","a",function(e){e.preventDefault();var n=$(this).attr("href"),t=n.split("&paged=");r(t[1])})});